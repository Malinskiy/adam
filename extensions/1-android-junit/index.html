<!DOCTYPE html><html lang="en-US"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=Edge"><link rel="shortcut icon" href="/adam/favicon.ico" type="image/x-icon"><link rel="stylesheet" href="/adam/assets/css/just-the-docs-default.css"> <script async src="https://www.googletagmanager.com/gtag/js?id=UA-185620090-1"></script> <script> window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'UA-185620090-1', { 'anonymize_ip': true }); </script> <script type="text/javascript" src="/adam/assets/js/vendor/lunr.min.js"></script> <script type="text/javascript" src="/adam/assets/js/just-the-docs.js"></script><meta name="viewport" content="width=device-width, initial-scale=1"><title>Android JUnit 4 rules | Adam</title><meta name="generator" content="Jekyll v4.1.1" /><meta property="og:title" content="Android JUnit 4 rules" /><meta property="og:locale" content="en_US" /><meta name="description" content="Adam supports tests that need to interact with the device be it adb or emulator console/gRPC access. This means that you can execute a test, set the location on the device or emulate a particular sensor input." /><meta property="og:description" content="Adam supports tests that need to interact with the device be it adb or emulator console/gRPC access. This means that you can execute a test, set the location on the device or emulate a particular sensor input." /><link rel="canonical" href="https://malinskiy.github.io/adam/extensions/1-android-junit/" /><meta property="og:url" content="https://malinskiy.github.io/adam/extensions/1-android-junit/" /><meta property="og:site_name" content="Adam" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2025-02-10T01:41:36+00:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="Android JUnit 4 rules" /> <script type="application/ld+json"> {"mainEntityOfPage":{"@type":"WebPage","@id":"https://malinskiy.github.io/adam/extensions/1-android-junit/"},"description":"Adam supports tests that need to interact with the device be it adb or emulator console/gRPC access. This means that you can execute a test, set the location on the device or emulate a particular sensor input.","url":"https://malinskiy.github.io/adam/extensions/1-android-junit/","@type":"BlogPosting","headline":"Android JUnit 4 rules","dateModified":"2025-02-10T01:41:36+00:00","datePublished":"2025-02-10T01:41:36+00:00","publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"https://malinskiy.github.io/adam/assets/images/adam.png"}},"@context":"https://schema.org"}</script><body> <svg xmlns="http://www.w3.org/2000/svg" style="display: none;"> <symbol id="svg-link" viewBox="0 0 24 24"><title>Link</title><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path> </svg> </symbol> <symbol id="svg-search" viewBox="0 0 24 24"><title>Search</title><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search"> <circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line> </svg> </symbol> <symbol id="svg-menu" viewBox="0 0 24 24"><title>Menu</title><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"><line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line> </svg> </symbol> <symbol id="svg-arrow-right" viewBox="0 0 24 24"><title>Expand</title><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right"><polyline points="9 18 15 12 9 6"></polyline> </svg> </symbol> <symbol id="svg-doc" viewBox="0 0 24 24"><title>Document</title><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file"><path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline> </svg> </symbol> </svg><div class="side-bar"><div class="site-header"> <a href="https://malinskiy.github.io/adam/" class="site-title lh-tight"><div class="site-logo"></div></a> <a href="#" id="menu-button" class="site-button"> <svg viewBox="0 0 24 24" class="icon"><use xlink:href="#svg-menu"></use></svg> </a></div><nav role="navigation" aria-label="Main" id="site-nav" class="site-nav"><div class="nav-category">Documentation</div><ul class="nav-list"><li class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="https://malinskiy.github.io/adam/docs/shell" class="nav-list-link">Shell</a><ul class="nav-list "><li class="nav-list-item "><a href="https://malinskiy.github.io/adam/docs/shell/shell-v2/" class="nav-list-link">Shell v2</a></ul><li class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="https://malinskiy.github.io/adam/docs/package-management/package-management/" class="nav-list-link">Package management</a><ul class="nav-list "><li class="nav-list-item "><a href="https://malinskiy.github.io/adam/docs/package-management/sideload/" class="nav-list-link">Sideload</a></ul><li class="nav-list-item"><a href="https://malinskiy.github.io/adam/docs/monitor-devices" class="nav-list-link">Device management</a><li class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="https://malinskiy.github.io/adam/docs/files" class="nav-list-link">Files</a><ul class="nav-list "><li class="nav-list-item "><a href="https://malinskiy.github.io/adam/docs/files/recommended/" class="nav-list-link">Recommended mode</a><li class="nav-list-item "><a href="https://malinskiy.github.io/adam/docs/files/compat/" class="nav-list-link">Compatibility mode</a><li class="nav-list-item "><a href="https://malinskiy.github.io/adam/docs/files/sync-v1/" class="nav-list-link">sync v1</a><li class="nav-list-item "><a href="https://malinskiy.github.io/adam/docs/files/sync-v2/" class="nav-list-link">sync v2</a><li class="nav-list-item "><a href="https://malinskiy.github.io/adam/docs/files/ls/" class="nav-list-link">ls wrapper</a></ul><li class="nav-list-item"><a href="https://malinskiy.github.io/adam/docs/emu" class="nav-list-link">Emulator</a><li class="nav-list-item"><a href="https://malinskiy.github.io/adam/docs/props/get-properties/" class="nav-list-link">Device properties (getprop)</a><li class="nav-list-item"><a href="https://malinskiy.github.io/adam/docs/instrumentation/test-runner/" class="nav-list-link">Test runner (am instrument)</a><li class="nav-list-item"><a href="https://malinskiy.github.io/adam/docs/screen-capture/screenshot/" class="nav-list-link">Screenshot</a><li class="nav-list-item"><a href="https://malinskiy.github.io/adam/docs/logcat/logcat/" class="nav-list-link">Logcat</a><li class="nav-list-item"><a href="https://malinskiy.github.io/adam/docs/port-forwarding/port-forwarding/" class="nav-list-link">Port forwarding</a><li class="nav-list-item"><a href="https://malinskiy.github.io/adam/docs/abb" class="nav-list-link">Android Binder Bridge</a><li class="nav-list-item"><a href="https://malinskiy.github.io/adam/docs/adbd" class="nav-list-link">adbd (on-device)</a><li class="nav-list-item"><a href="https://malinskiy.github.io/adam/docs/misc/misc/" class="nav-list-link">Miscellaneous</a><li class="nav-list-item"><a href="https://malinskiy.github.io/adam/docs/caveats/" class="nav-list-link">Caveats</a><li class="nav-list-item"><a href="https://malinskiy.github.io/adam/docs/api/" class="nav-list-link">API</a></ul><div class="nav-category">Tutorials</div><ul class="nav-list"><li class="nav-list-item"><a href="https://malinskiy.github.io/adam/tutorials/1-shell/" class="nav-list-link">1. Execute shell request</a><li class="nav-list-item"><a href="https://malinskiy.github.io/adam/tutorials/2-logcat/" class="nav-list-link">2. Stream logcat</a><li class="nav-list-item"><a href="https://malinskiy.github.io/adam/tutorials/3-install-package/" class="nav-list-link">3. Install package</a></ul><div class="nav-category">Add-ons</div><ul class="nav-list"><li class="nav-list-item active"><a href="https://malinskiy.github.io/adam/extensions/1-android-junit/" class="nav-list-link active">Android JUnit 4 rules</a><li class="nav-list-item"><a href="https://malinskiy.github.io/adam/extensions/2-android-event-producers/" class="nav-list-link">Android test metric producers</a></ul></nav><footer class="site-footer"> This site uses <a href="https://github.com/pmarsceill/just-the-docs">Just the Docs</a>, a documentation theme for Jekyll.</footer></div><div class="main" id="top"><div id="main-header" class="main-header"><div class="search"><div class="search-input-wrap"> <input type="text" id="search-input" class="search-input" tabindex="0" placeholder="Search Adam" aria-label="Search Adam" autocomplete="off"> <label for="search-input" class="search-label"><svg viewBox="0 0 24 24" class="search-icon"><use xlink:href="#svg-search"></use></svg></label></div><div id="search-results" class="search-results"></div></div><nav aria-label="Auxiliary" class="aux-nav"><ul class="aux-nav-list"><li class="aux-nav-list-item"> <a href="//github.com/Malinskiy/adam" class="site-button" > Adam on GitHub </a></ul></nav></div><div id="main-content-wrap" class="main-content-wrap"><div id="main-content" class="main-content" role="main"><p>Adam supports tests that need to interact with the device be it adb or emulator console/gRPC access. This means that you can execute a test, set the location on the device or emulate a particular sensor input.</p><p>This ability makes it possible to provide end-to-end testing environment for a lot of complex applications. Some examples could be a fitness tracker app that needs to recognize a particular pattern of movement in the device, or an application that needs to handle phone calls/SMS.</p><p>Here is a list of currently supported sensors by the <a href="https://android.googlesource.com/platform/prebuilts/android-emulator/+/master/linux-x86_64/lib/emulator_controller.proto" title="emulator_controller.proto">emulator_controller.proto</a> just as an example of the possibilities:</p><div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  enum SensorType {
    // Measures the acceleration force in m/s2 that is applied to a device
    // on all three physical axes (x, y, and z), including the force of
    // gravity.
    ACCELERATION = 0;
    // Measures a device's rate of rotation in rad/s around each of the
    // three physical axes (x, y, and z).
    GYROSCOPE = 1;
    // Measures the ambient geomagnetic field for all three physical axes
    // (x, y, z) in μT.
    MAGNETIC_FIELD = 2;
    // Measures degrees of rotation that a device makes around all three
    // physical axes (x, y, z)
    ORIENTATION = 3;
    // Measures the temperature of the device in degrees Celsius (°C).
    TEMPERATURE = 4;
    // Measures the proximity of an object in cm relative to the view screen
    // of a device. This sensor is typically used to determine whether a
    // handset is being held up to a person's ear.
    PROXIMITY = 5;
    // Measures the ambient light level (illumination) in lx.
    LIGHT = 6;
    // Measures the ambient air pressure in hPa or mbar.
    PRESSURE = 7;
    // Measures the relative ambient humidity in percent (%).
    HUMIDITY = 8;
    MAGNETIC_FIELD_UNCALIBRATED = 9;
  }
</code></pre></div></div><p>In order to use the following rules, support from your test runner is required. A reference implementation of this can be found in <a href="https://github.com/MarathonLabs/marathon">Marathon</a> test runner.</p><p>Tests can be injected with a usable implementation of adb, console or gRPC as following using a custom JUnit 4 rule. All rules provide ways to fail via assumption, e.g. <code class="language-plaintext highlighter-rouge">EmulatorGrpcRule(mode = Mode.ASSUME)</code> in case testing is done in a mixed device environment where not every run has emulators/adb access.</p><h2 id="adbrule"> <a href="#adbrule" class="anchor-heading" aria-labelledby="adbrule"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> AdbRule</h2><p>The rule for adb provides access to the usual adam requests that target only the current device via explicitly specifying the serial number of the device for each request.</p><div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">class</span> <span class="nc">AdbActivityTest</span> <span class="p">{</span>
    <span class="err">@</span><span class="k">get</span><span class="p">:</span><span class="nc">Rule</span>
    <span class="kd">val</span> <span class="py">rule</span> <span class="p">=</span> <span class="nc">ActivityScenarioRule</span><span class="p">(</span><span class="nc">MainActivity</span><span class="o">::</span><span class="k">class</span><span class="p">.</span><span class="n">java</span><span class="p">)</span>

    <span class="err">@</span><span class="k">get</span><span class="p">:</span><span class="nc">Rule</span>
    <span class="kd">val</span> <span class="py">adbRule</span> <span class="p">=</span> <span class="nc">AdbRule</span><span class="p">(</span><span class="n">mode</span> <span class="p">=</span> <span class="nc">Mode</span><span class="p">.</span><span class="nc">ASSERT</span><span class="p">)</span>

    <span class="nd">@Test</span>
    <span class="k">fun</span> <span class="nf">testVmState</span><span class="p">()</span> <span class="p">{</span>
        <span class="nf">runBlocking</span> <span class="p">{</span>
            <span class="kd">val</span> <span class="py">result</span> <span class="p">=</span> <span class="n">adbRule</span><span class="p">.</span><span class="n">adb</span><span class="p">.</span><span class="nf">execute</span><span class="p">(</span><span class="nc">ShellCommandRequest</span><span class="p">(</span><span class="s">"echo \"hello world\""</span><span class="p">))</span>
            <span class="nf">assert</span><span class="p">(</span><span class="n">result</span><span class="p">.</span><span class="n">exitCode</span> <span class="p">==</span> <span class="mi">0</span><span class="p">)</span>
            <span class="nf">assert</span><span class="p">(</span><span class="n">result</span><span class="p">.</span><span class="n">output</span><span class="p">.</span><span class="nf">startsWith</span><span class="p">(</span><span class="s">"hello world"</span><span class="p">))</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div><h2 id="emulatorgrpcrule"> <a href="#emulatorgrpcrule" class="anchor-heading" aria-labelledby="emulatorgrpcrule"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> EmulatorGrpcRule</h2><p>The rule for gRPC provides access to the supported gRPC requests and is only valid for an emulator. For a list of supported requests check the official source <a href="https://android.googlesource.com/platform/prebuilts/android-emulator/+/master/linux-x86_64/lib/emulator_controller.proto" title="emulator_controller.proto">emulator_controller.proto</a></p><p>No support for gRPC TLS or auth is currently implemented</p><div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">class</span> <span class="nc">GrpcActivityTest</span> <span class="p">{</span>
    <span class="err">@</span><span class="k">get</span><span class="p">:</span><span class="nc">Rule</span>
    <span class="kd">val</span> <span class="py">rule</span> <span class="p">=</span> <span class="nc">ActivityScenarioRule</span><span class="p">(</span><span class="nc">MainActivity</span><span class="o">::</span><span class="k">class</span><span class="p">.</span><span class="n">java</span><span class="p">)</span>

    <span class="err">@</span><span class="k">get</span><span class="p">:</span><span class="nc">Rule</span>
    <span class="kd">val</span> <span class="py">emulator</span> <span class="p">=</span> <span class="nc">EmulatorGrpcRule</span><span class="p">(</span><span class="n">mode</span> <span class="p">=</span> <span class="nc">Mode</span><span class="p">.</span><span class="nc">ASSERT</span><span class="p">)</span>

    <span class="nd">@Test</span>
    <span class="k">fun</span> <span class="nf">testVmState</span><span class="p">()</span> <span class="p">{</span>
        <span class="nf">runBlocking</span> <span class="p">{</span>
            <span class="kd">val</span> <span class="py">vmState</span> <span class="p">=</span> <span class="n">emulator</span><span class="p">.</span><span class="n">grpc</span><span class="p">.</span><span class="nf">getVmState</span><span class="p">(</span><span class="nc">Empty</span><span class="p">.</span><span class="nf">getDefaultInstance</span><span class="p">())</span>
            <span class="nf">assert</span><span class="p">(</span><span class="n">vmState</span><span class="p">.</span><span class="n">state</span> <span class="p">==</span> <span class="nc">VmRunState</span><span class="p">.</span><span class="nc">RunState</span><span class="p">.</span><span class="nc">RUNNING</span><span class="p">)</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div><h2 id="emulatorconsolerule"> <a href="#emulatorconsolerule" class="anchor-heading" aria-labelledby="emulatorconsolerule"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> EmulatorConsoleRule</h2><p>Emulator console port requires an auth token by default that is stored on the host OS of the emulator in the <code class="language-plaintext highlighter-rouge">$HOME/.emulator_console_auth_token</code> file. If you want to get rid of the auth, leave an empty file at the same location. This will prevent the emulator from requiring an auth token during the request.</p><div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">class</span> <span class="nc">ConsoleActivityTest</span> <span class="p">{</span>
    <span class="err">@</span><span class="k">get</span><span class="p">:</span><span class="nc">Rule</span>
    <span class="kd">val</span> <span class="py">rule</span> <span class="p">=</span> <span class="nc">ActivityScenarioRule</span><span class="p">(</span><span class="nc">MainActivity</span><span class="o">::</span><span class="k">class</span><span class="p">.</span><span class="n">java</span><span class="p">)</span>

    <span class="err">@</span><span class="k">get</span><span class="p">:</span><span class="nc">Rule</span>
    <span class="kd">val</span> <span class="py">console</span> <span class="p">=</span> <span class="nc">EmulatorConsoleRule</span><span class="p">(</span><span class="n">mode</span> <span class="p">=</span> <span class="nc">Mode</span><span class="p">.</span><span class="nc">ASSERT</span><span class="p">)</span>

    <span class="nd">@Test</span>
    <span class="k">fun</span> <span class="nf">testVmState</span><span class="p">()</span> <span class="p">{</span>
        <span class="nf">runBlocking</span> <span class="p">{</span>
            <span class="kd">val</span> <span class="py">result</span> <span class="p">=</span> <span class="n">console</span><span class="p">.</span><span class="nf">execute</span><span class="p">(</span><span class="s">"avd status"</span><span class="p">)</span>
            <span class="nc">Allure</span><span class="p">.</span><span class="nf">description</span><span class="p">(</span><span class="s">"VM state is $result"</span><span class="p">)</span>
            <span class="nf">assert</span><span class="p">(</span><span class="n">result</span><span class="p">.</span><span class="nf">contains</span><span class="p">(</span><span class="s">"running"</span><span class="p">))</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div><h2 id="notes-for-developers-of-test-runners"> <a href="#notes-for-developers-of-test-runners" class="anchor-heading" aria-labelledby="notes-for-developers-of-test-runners"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Notes for developers of test runners</h2><p>For real devices only adb access can be exposed. This is achieved via reverse port forwarding on the test runner’s side. This works regardless of the transport mode (direct USB connection or TCP via adb connect). The connection to adb can then be achieved via direct communication to localhost on the real device. The port number that is by default 5037, can be different though. Only test runner has the actual method of establishing the adb port (since test runner communicates with this adb server), hence test runner has to provide this port number via Instrumentation arguments to the test.</p><p>For emulators there are two cases: If the emulator is a local emulator, then access to the host’s loopback interface (which has all the necessary services) can be achieved via special 10.0.2.2 IP. For adb test runner should provide the port number for the same reasons as for real phones. For telnet communication only test runner can calculate the port number (emulator-5554 -&gt; 5554). Accessing this port requires auth token which has to be supplied by test runner since there is no way to access host’s file system for the $HOME/.emulator_console_auth_token. Same problem with the gRPC - everything has to be supplied by the test runner.</p><p>If the emulator is a remote emulator connected via adb connect then it is not currently possible to establish the telnet port as well as gRPC port. Although technically possible, in practice the adb port for such a case would most likely be port-forwarded already and there is no way to guarantee that the adb connect port is actually equal to the real adb port. This would be possible to solve provided the emulator was able to receive emulator-5554 variable somehow, but any Android properties would break on the load of a snapshot for example.</p><p>The contract for the test runner defines passing host and port of a provided adb/console/grpc connection. You can get it as a shared dependency:</p><div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>dependencies {
  implementation 'com.malinskiy.adam:android-testrunner-contract:X.X.X'
}
</code></pre></div></div><p>Here is roughly how it looks (please use the maven dependency and don’t copy paste this):</p><div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">TestRunnerContract</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="nc">String</span> <span class="n">grpcPortArgumentName</span> <span class="o">=</span> <span class="s">"com.malinskiy.adam.android.GRPC_PORT"</span><span class="o">;</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="nc">String</span> <span class="n">grpcHostArgumentName</span> <span class="o">=</span> <span class="s">"com.malinskiy.adam.android.GRPC_HOST"</span><span class="o">;</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="nc">String</span> <span class="n">adbPortArgumentName</span> <span class="o">=</span> <span class="s">"com.malinskiy.adam.android.ADB_PORT"</span><span class="o">;</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="nc">String</span> <span class="n">adbHostArgumentName</span> <span class="o">=</span> <span class="s">"com.malinskiy.adam.android.ADB_HOST"</span><span class="o">;</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="nc">String</span> <span class="n">consolePortArgumentName</span> <span class="o">=</span> <span class="s">"com.malinskiy.adam.android.CONSOLE_PORT"</span><span class="o">;</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="nc">String</span> <span class="n">consoleHostArgumentName</span> <span class="o">=</span> <span class="s">"com.malinskiy.adam.android.CONSOLE_HOST"</span><span class="o">;</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="nc">String</span> <span class="n">emulatorAuthTokenArgumentName</span> <span class="o">=</span> <span class="s">"com.malinskiy.adam.android.AUTH_TOKEN"</span><span class="o">;</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="nc">String</span> <span class="n">deviceSerialArgumentName</span> <span class="o">=</span> <span class="s">"com.malinskiy.adam.android.ADB_SERIAL"</span><span class="o">;</span>
<span class="o">}</span>
</code></pre></div></div><p>It is test runner’s responsibility to set these up when executing tests, e.g.:</p><div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>am instrument <span class="nt">-w</span> <span class="nt">-r</span> <span class="nt">--no-window-animation</span> <span class="nt">-e</span> class com.example.AdbActivityTest#testUnsafeAccess <span class="nt">-e</span> debug <span class="nb">false</span> <span class="nt">-e</span> com.malinskiy.adam.android.ADB_PORT 5037 <span class="nt">-e</span> com.malinskiy.adam.android.ADB_HOST 10.0.2.2 <span class="nt">-e</span> com.malinskiy.adam.android.ADB_SERIAL emulator-5554 <span class="nt">-e</span> com.malinskiy.adam.android.GRPC_PORT 8554 <span class="nt">-e</span> com.malinskiy.adam.android.GRPC_HOST 10.0.2.2 com.example.test/androidx.test.runner.AndroidJUnitRunner
</code></pre></div></div><hr><footer><p><a href="#top" id="back-to-top">Back to top</a></p><div class="d-flex mt-2"><p class="text-small text-grey-dk-000 mb-0"> <a href="https://github.com/Malinskiy/adam/tree/master/docs/_extensions/1-android-junit.md" id="edit-this-page">Edit this page on GitHub</a></p></div></footer></div></div><div class="search-overlay"></div></div>
